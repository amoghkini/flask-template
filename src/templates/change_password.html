{% extends 'base.html' %}

{% block title %}Change password{% endblock %}

{% block content %}
<div class="container">
    <h1>Change Password</h1>
    <form class="custom-form" action="{{ url_for('change_password_api') }}" method="POST">
        <div class="form-group">
            <label for="password">Old Password</label>
            <div class="password-toggle">
                <input type="password" class="form-control" id="old_password" name="old_password"
                    oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                    maxlength="40" required>
                <i class="toggle-icon fa fa-eye-slash" aria-hidden="true" id="togglePassword"></i>
            </div>
            <small class="error-message">{% if errors and errors.old_password %} {{ errors.old_password }} {% endif %}</small>
        </div>

        <div class="form-group">
            <label for="password">New Password</label>
            <div class="password-toggle">
                <input type="password" class="form-control" id="new_password" name="new_password"
                    oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                    maxlength="40" required>
                <i class="toggle-icon fa fa-eye-slash" aria-hidden="true" id="togglePassword"></i>
            </div>
            <small class="error-message">{% if errors and errors.new_password %} {{ errors.new_password }} {% endif %}</small>
        </div>
        
        <div class="form-group">
            <label for="confirmPassword">Confirm New Password</label>
            <div class="password-toggle">
                <input type="password" class="form-control" id="confirm_new_password" name="confirm_new_password"
                    oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                    maxlength="40" required>
                <i class="toggle-icon fa fa-eye-slash" aria-hidden="true" id="toggleConfirmPassword"></i>
            </div>
            <small class="error-message" id="confirmPasswordError">{% if errors and errors.confirm_new_password %}{{
                errors.confirm_new_password }}{% endif %}</small>
        </div>

        <div class="button-container">
            <button type="submit">Change Password</button>
            <button type="reset" id="resetButton">Reset</button>
        </div>
    </form>
</div>
{% endblock %}